{"version":3,"sources":["components/MovieItem.jsx","components/MovieTabs.jsx","components/MoviePage.jsx","components/App.jsx","utils/api.js","index.js"],"names":["MovieItem","state","willWatch","this","props","data","deleteMovie","addMovieToWillWatch","deleteMovieFromWillWatch","className","src","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","React","Component","MovieTabs","sort_by","upDateSortBy","handleClick","value","getClassLink","MoviePage","page","getNextPage","getPrevPage","total","role","aria-label","App","getMovies","fetch","then","responce","json","movies","results","total_pages","movie","console","log","id","updateMovies","filter","item","updateMoviesWillWatch","moviesWillWatch","push","prevProps","prefState","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3555db0e.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass MovieItem extends React.Component {\r\n  state = {\r\n    willWatch: false,\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      data,\r\n      deleteMovie,\r\n      addMovieToWillWatch,\r\n      deleteMovieFromWillWatch\r\n    } = this.props;\r\n    // props.data = {};\r\n    return (\r\n      <div className=\"card\">\r\n        <img\r\n          className=\"card-img-top\"\r\n          src={`https://image.tmdb.org/t/p/w500${data.backdrop_path ||\r\n            data.poster_path}`}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"card-body\">\r\n          <h6 className=\"card-title\">{data.title}</h6>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <p className=\"mb-0\">Rating: {data.vote_average}</p>\r\n            {this.state.willWatch ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    willWatch: false\r\n                  });\r\n                  deleteMovieFromWillWatch(data);\r\n                }}\r\n              >\r\n                Will Watch\r\n              </button>\r\n            ) : (\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => {\r\n                    this.setState({\r\n                      willWatch: true\r\n                    });\r\n                    addMovieToWillWatch(data);\r\n                  }}\r\n                >\r\n                  Will Watch\r\n              </button>\r\n              )}\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              deleteMovie(data);\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieItem;\r\n","import React from \"react\";\n\nconst MovieTabs = (props) => {\n    const {sort_by, upDateSortBy} = props;\n    const handleClick = value => () => upDateSortBy(value);\n    const getClassLink = value => {\n        return `nav-link ${sort_by === value ? \"active\" : \"\"}`\n    }\n\n    return (\n        \n        <ul className=\"tabs nav nav-pills\">\n            <li className=\"nav-item\">\n                <div className={getClassLink(\"popularity.desc\")}\n                onClick = {handleClick(\"popularity.desc\")}\n                >\n                    Popularity desc\n                </div>\n            </li>\n            <li className=\"nav-item\">\n                <div className={getClassLink(\"revenue.desc\")}\n                onClick = {handleClick(\"revenue.desc\")}\n                >\n                    Revenue desc\n                </div>\n            </li>\n            <li className=\"nav-item\">\n                <div className={getClassLink(\"vote_average.desc\")}\n                onClick = {handleClick(\"vote_average.desc\")}\n                >\n                    Vote average desc\n                </div>\n            </li>\n        </ul>\n\n    )\n};\n\nexport default MovieTabs;","import React from \"react\";\n\nconst MoviePage = (props) => {\n    const {page, getNextPage, getPrevPage, total} = props;\n    return (\n        <div className = \"d-flex justify-content-between\">\n       <div>\n            <button type=\"button\" className=\"btn btn-primary\">\n                Всего {total} страниц             <span className=\"badge badge-light\">Текущая {page}</span>\n            </button>\n        </div>\n        <div className=\"btn-toolbar\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\n            \n            <div className=\"btn-group mr-2\" role=\"group\" aria-label=\"First group\">\n                <button type=\"button\" className=\"btn btn-secondary\" onClick = {getPrevPage}>Назад</button>\n                <button type=\"button\" className=\"btn btn-secondary\" onClick = {getNextPage}>Вперед</button>\n            </div>\n            \n        </div>\n        </div>\n    )\n};\n\nexport default MoviePage;\n","import React from \"react\";\r\n//import { moviesData } from \"../moviesData\";\r\nimport MovieItem from \"./MovieItem\";\r\nimport {API_URL, API_KEY_3} from \"../utils/api\";\r\nimport MovieTabs from \"./MovieTabs\";\r\nimport MoviePage from \"./MoviePage\";\r\n\r\n// UI = fn(state, props)\r\n\r\n// App = new React.Component()\r\n\r\nclass App extends React.Component {\r\n  constructor() {\r\n    super();\r\n    console.log(\"constructor\");\r\n    this.state = {\r\n      movies: [],\r\n      moviesWillWatch: [],\r\n      sort_by: \"popularity.desc\",\r\n      page: 1,\r\n      total: 0,\r\n    };\r\n  }\r\n  \r\n\r\n  componentDidMount() {\r\n    console.log(\"componentDidMount\");\r\n      this.getMovies();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prefState) {\r\n      console.log(\"componentDidUpdate\");\r\n      if (prefState.sort_by !== this.state.sort_by || prefState.page !== this.state.page) {\r\n        this.getMovies();\r\n        \r\n    }\r\n    }\r\n\r\n  getMovies = () => {\r\n    \r\n      fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`)\r\n      .then(responce => responce.json())\r\n      .then(data => this.setState({movies: data.results, total: data.total_pages}));\r\n      \r\n    }\r\n\r\n  upDateSortBy = value => {\r\n    return (\r\n      this.setState({sort_by: value})\r\n    )\r\n  }\r\n\r\n  getNextPage = () => {\r\n     if (this.state.page === this.state.total) return \"\";\r\n     return this.setState({page: this.state.page + 1});\r\n     \r\n  }  \r\n\r\n  getPrevPage = () => {\r\n    \r\n    if (this.state.page === 1 ) return \"\"; \r\n    return this.setState({page: this.state.page - 1});\r\n    \r\n  }  \r\n\r\n  deleteMovie = movie => {\r\n    console.log(movie.id);\r\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\r\n    console.log(updateMovies);\r\n\r\n    // this.state.movies = updateMovies;\r\n    this.setState({\r\n      movies: updateMovies\r\n    });\r\n  };\r\n\r\n  addMovieToWillWatch = movie => {\r\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\r\n    updateMoviesWillWatch.push(movie);\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\n\r\n  deleteMovieFromWillWatch = movie => {\r\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\r\n      item => item.id !== movie.id\r\n    );\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"render\");\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row mt-4\">\r\n          <div className=\"col-9\">\r\n          <div className = \"row mb-4\">\r\n          <div className = \"col-12\">\r\n          <MovieTabs \r\n          sort_by = {this.state.sort_by} \r\n          upDateSortBy = {this.upDateSortBy}  \r\n          />\r\n          </div>\r\n          </div>\r\n            <div className=\"row\">\r\n              \r\n              {this.state.movies.map(movie => {\r\n                return (\r\n                  <div className=\"col-6 mb-4\" key={movie.id}>\r\n                    <MovieItem\r\n                      data={movie}\r\n                      deleteMovie={this.deleteMovie}\r\n                      addMovieToWillWatch={this.addMovieToWillWatch}\r\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <h4>Will Watch: {this.state.moviesWillWatch.length} movies</h4>\r\n            <ul className=\"list-group\">\r\n              {this.state.moviesWillWatch.map(movie => (\r\n                <li key={movie.id} className=\"list-group-item\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <p>{movie.title}</p>\r\n                    <p>{movie.vote_average}</p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className = \"row mb-4\">\r\n          <div className = \"col-9\">\r\n            <MoviePage page={this.state.page} getNextPage = {this.getNextPage}  getPrevPage = {this.getPrevPage}\r\n              total = {this.state.total}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\r\n\r\nexport const API_KEY_4 =\r\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./stylesheets/index.scss\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}